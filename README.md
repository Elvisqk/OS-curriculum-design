# OS-curriculum-design

本项目为：山东大学-计算机科学与技术学院-操作系统课程设计  
# 杜绝抄袭，仅供参考
# 一些注意事项

注：我在先前课程的实验中，已经安装了WSL 2.3.26，并下载了Ubuntu 20.04.6  
所以我要在WSL中进行全部操作，如果你想完全仿照我的操作进行，记得安装WSL 2再回到此处  
注：用《指南》代指《OS课程设计指南(C++)》  
注：如果我文中出现了p27，p38之类的页数，如无特殊说明，则是指《指南》的对应页数  
注：我在代码中增加了大量的注释以便我理解Nachos，大部分注释均是从指南中copy的文本，或者仅仅是代码原本的英文注释的翻译，少部分注释是我自己写的文本。  
# 心理活动

1、emmmm，虽然之前用github下载过很多东西，但是还是第一次尝试自己使用github写项目，包括分支的创建、删除、合并什么的，现在还不是很熟悉，我现在打算每进行一个实验就创建一个分支，虽然目前觉得不是那么有这个必要，但是还是多做些吧，如果后续觉得这个操作比较冗余，会再修改我的习惯。  
补充：我决定多复制几份OS项目而不是创建分支，反正远程仓库不限制空间，冗余就冗余吧  
2、目前是打算，按照操作指南进行，然后把我遇到的问题，都会记录在每个实验的README.md(每个ex_i文件夹都有README.md)，这个项目链接我应该会继续传下去，这样，学弟学妹们如果遇到跟我同样的问题就知道如何解决了  
补充：据你所见，这是只是对我遇到的问题的解决，你可能遇不到，也可能遇到其他一些奇奇怪怪的问题，所以这里仅供参考，具体还是以指南为主  
3、老实讲，我以前总嫌弃实验指导写的又长又难懂，但是我自己写这个项目才发现，想要在极短的篇幅内把事情讲清楚，还真是不好叙述  
补充1：还想造福后人来着，感觉写的不太行啊，好多地方我再回看感觉不堪入目，叙述繁琐表意不清，或许我该再学学语文，不过好在代码是全的完整的，应该也能帮到后人。  
补充2：我写的简直就是依托答辩  
补充3：上述补充2都是在完成实验3之后写的，由于要开始写实验报告，所以回看我的README.md，得到了如上感受，现在我刚刚完成了实验4，我觉得写的应该还算有进步，尤其是对nachos -t命令的完善，间接明了  
4、关于阶段实验报告，我在做完实验三之后才知道还要交阶段实验报告，于是开始补，所以前三个实验的实验报告不是那么全，思路不是那么清晰，毕竟我不太想再跟着长篇指南逐行阅读(这太耗时间了，而且我已经看懂了，再看也用处不大)
但是实验4(写这条时刚做完实验4)的报告可以说相当详细，甚至于繁琐。应该帮助不小  
5、从实验5开始，我大部分的随手记录就直接记在实验报告里了，就不写README了。实验报告很乱，因为我本来也不是一点一点整理的，而是一边做实验一边记录
6、我做完实验5之后回顾了一下，我决定这样干：在每一处修改的地方，注释上“新增代码”“修改代码”“注释代码”等等信息，这样通过全局搜索，就可以找到快速找到每一处修改点

# 最终感想
终于做完了，讲真的，痛苦，十分痛苦，我从一开始做实验的时候，因为老师提到这个nachos操作系统最好有备份，萌生了写一个github库的想法，一是用来记录备份，二是别人也可以进行借鉴，
我做前七个实验的时候，觉得不过如此，大部分代码都被指南给实现了，只是偶尔有那么一点点小问题，也很快就能解决，前七个实验，顺利的话，半天做一个(一边做一边写实验报告)没什么大问题，
到最后一个实验八的时候，我甚至说“最多1天时间，我就把实验八连同课程设计报告都写出来”，结果啪啪打脸，做实验八的时候，指南并没有像先前实验那样面面俱到，把需要改的代码都改好展示，
很多时候只是轻飘飘的一句“为方便起见，为线程增加一个 TERMINATED 状态，相应地增加一个terminated 队列，将所有的线程在调用Finish()后先进入该队列，再伺机销毁”至于怎么给线程增加这么一个状态？自己找去吧，
怎么增加terminated队列？该在哪个类下用什么类型变量，起什么名字，猜去吧，更难受的是，你还不能自作主张的去给这个队列起名字，因为后边指南里使用了这个变量List *terminatedList，如果你前面自己起了名字叫List *TerminatedList
那么不好意思，要么你别跟着指南代码抄了，要么你回去改变量名字去。所以我在做实验八的时候，一边复制指南的参考代码，一边还往前翻修改代码，改的很乱很难受，我做实验八至少备份了3次代码，
我要说，做实验八的最好办法就是：把别人的完整代码先拿过来，然后一边读指南一边理解，别改动代码。  
吐槽完了，不管怎么说吧，这次实验对我理解操作系统帮助非常大，毕竟，“实践是检验真理的唯一标准”，要我说，实践也是学习的最快方式，从最开始的理解Nachos编译环境，重温操作系统的一些同步机制，再到后边修改nachos的文件系统，  
还有最后的理解并实现操作系统的系统调用，尽管这些东西对于操作系统来说也只是皮毛内容，但是也让我觉得收获颇丰吧。  
说完这个感想，我应该不会再更了，我本身也不是什么大佬，再也不想看nachos了，告辞各位。  
## 补充：还有一件事~~
我实验八的实验报告里的“最终代码”截图不是真的最终代码，我原本以为那会是最终代码，但是后来还是有不少改动，所以如果你想要改lab7-8的代码，还是直接从这个库的ex8里拷贝吧。  
另外，https://github.com/159753Fetter/SDUCS 这个学长的代码写的很好，虽然只有代码，但是依然比我强  
# 补充：实验八代码相关说明
原本，我是这么想的：反正是最后一个实验了，我直接对userprog和threads等文件夹底下的代码改得了，就不把相关文件拷贝到lab7-8文件夹底下了，我确实也是这么做的，毕竟咱有备份。  
但是，我在后续中做了一些修改，不出意外的话(只是大概率，我不打包票，出问题了别骂我，你总不能骂一个不求回报的开源工作者吧)，我的OS应该是这么一样状态：  
1、经过改动的文件夹有：lab2，lab3，lab5，lab7-8，test，其他文件夹均未被改动。  
2、你可以直接下载ex8底下的OS文件夹，然后运行各实验的调试，因为后续实验并不影响前面实验的运行
